# 2. 단위 테스트란 무엇인가?

단위 테스트의 정의에는 놀랄만큼 많은 뉘앙스가 있다.

크게 두가지로 나뉘는데, `고전파` 와 `런던파`로 나뉜다.

> **고전파는**
> 
> **모든 사람이 단위 테스트와 테스트 주도 개발에 원론적으로 접근하는 방식이기에 `고전` 이라 불린다.**

> **런던파는**
>
> 런던의 프로그래밍 커뮤니티에서 시작되어 `런던`이라 불리며 
> 고전파와 다른 방식으로 단위 테스트에 접근하기에 나뉘었다.

## 2.1 `단위 테스트` 의 정의

단위 테스트에 대한 많은 정의가 있지만 가장 중요한 세가지 속성을 보자면

1. 작은 코드 조각을 검증하고
2. 빠르게 수행하고
3. 격리된 방식으로 처리하는 자동화된 테스트


참고
- [Dzone::Writing Your F.I.R.S.T Unit Tests](https://dzone.com/articles/writing-your-first-unit-tests)

### 2.1.1 격리 문제에 대한 런던파의 접근

> **동작을 외부 영향과 분리하여 테스트 대상 클래스에만 집중할 수 있어야 한다.**

이 방법의 한 가지 이점 중 하나는 **테스트가 실패하면 코드베이스의 어느 부분이 고장났는지 확실히 알 수 있다는 것**

다른 이점으로는 **객체 그래프를 분할 할 수 있다**

-> 테스트 대역(목)을 사용하면 객체 그래프를 다시 만들지 않아도 된다.

해당 방식으로 검증할경우 행위자 혹은 대상의 상태만을 검증하는데서 끝나지 않고

행위자가 올바르게 호출을 했는지, 혹은 호출 횟수까지 검증할 수 있다.

### 2.1.2 격리 문제에 대한 고전파의 접근

> 단위 테스트는 서로 격리하여 실행하여야 한다. 

매우 고전적인 방법으로 해당 문제를 해결하기 위해

서로 충돌이나 영향을 끼치는 공유 영역을 제외하고 한번에 테스트

> 공유 의존성
> 
> **테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있는 수단을 제공하는 의존성**

> 비공개 의존성
>
> **공유하지 않는 의존성으로, 애플리케이션 실행 프로세스 외부에서 실행되는 의존성**

> 휘발성 의존성

> 다음 속성중 하나를 나타내는 의존성
> 
> * 개발자 머신에 기본 설치된 환경 외에 런타임 환경의 설정 및 구성을 요구
> * 비결정적 동작을 포한한다.
>   * 난수 생성기
>   * 현재 날짜 반환기

## 2.2 단위 테스트의 런던파와 고전파

|        | 격리 주체   | 단위 크기                    | 테스트 대역 사용 대상      |
| :----- | :---------- | :--------------------------- | :------------------------- |
| 런던파 | 단위        | 단일 클래스                  | 불변 의존성 외 모든 의존성 |
| 고전파 | 단위 테스트 | 단일 클래스 또는 클래스 세트 | 공유 의존성                |


## 2.3 고전파와 런던파의 비교

> 고전파의 경우 
> 
> 궁극적인 목표인 프로젝트의 지속 가능한 성장을 달성하는데 더 적합하다
> 
> 목을 사용하는 테스트보다 불안한 경향이 있기 때문

---

따로 정리하는 것보다 해당 부분은 다시 읽어보는게 더 도움이 될듯